# ğŸ§  Brainstorm: Gap Analysis â€” Planejamento vs ImplementaÃ§Ã£o Atual

### Context
AnÃ¡lise detalhada comparando o planejamento inicial do sistema de viagem com o que estÃ¡ **efetivamente implementado** no cÃ³digo e no banco de dados.

---

## ğŸ“Š Resumo Executivo

| MÃ³dulo | Status | Cobertura |
|:---|:---|:---|
| ğŸ” AutenticaÃ§Ã£o | ğŸŸ¢ Implementado | ~95% |
| ğŸŒ GestÃ£o de Viagens | ğŸŸ¢ Implementado | 100% |
| ğŸ—ºï¸ Roteiro DiÃ¡rio | ğŸŸ¡ Parcial | ~50% |
| ğŸ¨ Reservas | ğŸŸ¢ Implementado | ~75% |
| ğŸ“‚ Documentos | ğŸ”´ NÃ£o Implementado | ~5% |
| â° Lembretes | ğŸ”´ NÃ£o Implementado | 0% |
| ğŸ’° Controle Financeiro | ğŸŸ¢ Implementado | ~70% |
| ğŸ‘¥ Viagens Compartilhadas | ğŸŸ¡ Parcial | ~40% |
| âœ… Checklist de Viagem | ğŸŸ¢ Implementado | ~90% |
| ğŸ¤– Recursos de IA | ğŸ”´ NÃ£o Implementado | ~5% |
| ğŸ”’ SeguranÃ§a | ğŸŸ¢ Implementado | ~80% |
| ğŸ¨ Interface/Design | ğŸŸ¢ Implementado | ~65% |

---

## ğŸ” AutenticaÃ§Ã£o â€” ğŸŸ¢ 95%

| Feature | Status | Notas |
|:---|:---|:---|
| Login com email/senha | âœ… | Via Supabase Auth |
| Login com Google | âœ… | Configurado e funcional (OAuth Provider) |
| RecuperaÃ§Ã£o de senha | âœ… | [handleForgotPassword](file:///g:/Programacao/sistema_viagem/pages/Login.tsx#61-80) em [Login.tsx](file:///g:/Programacao/sistema_viagem/pages/Login.tsx) |
| Magic Link | âœ… | [handleMagicLink](file:///g:/Programacao/sistema_viagem/pages/Login.tsx#44-60) implementado |
| Perfil do usuÃ¡rio | âœ… | Nome, email, foto, fuso horÃ¡rio e idioma implementados |

---

## ğŸŒ MÃ³dulo 1 â€” GestÃ£o de Viagens â€” ğŸŸ¢ 100%

| Feature | Status | Notas |
|:---|:---|:---|
| Criar mÃºltiplas viagens | âœ… | CRUD completo |
| Nome da viagem | âœ… | |
| Destino principal | âœ… | |
| Destinos secundÃ¡rios | âœ… | Implementado |
| Data inÃ­cio/fim | âœ… | Com validaÃ§Ã£o |
| Tipo (Lazer, Trabalho...) | âœ… | Implementado no schema e UI |
| OrÃ§amento previsto | âœ… | Implementado no schema e UI |
| Moeda | âœ… | `defaultCurrency` |
| Status dinÃ¢mico | âœ… | Substituiu TripStatus estÃ¡tico; cÃ¡lculos 100% baseados em datas ISO |
| Conformidade de API | âœ… | PadronizaÃ§Ã£o de mensagens de erro para PT-BR |
| Imagem de capa (IA) | âœ… | `coverImageUrl` |

---

## ğŸ—ºï¸ MÃ³dulo 2 â€” Roteiro DiÃ¡rio â€” ğŸŸ¡ 50%

| Feature | Status | Notas |
|:---|:---|:---|
| Agrupamento HierÃ¡rquico | âœ… | Dias listados corretamente debaixo de suas respectivas hospedagens (Stays) |
| Criar dias automaticamente | âœ… | Baseado no intervalo de datas |
| Adicionar atividades por dia | âœ… | CRUD de atividades |
| Campos da atividade | âœ… | TÃ­tulo, horÃ¡rio, endereÃ§o, custo, notas |
| Reordenar via drag-and-drop | âŒ | `orderIndex` existe mas sem DnD no frontend |
| VisualizaÃ§Ã£o Lista | âœ… | |
| VisualizaÃ§Ã£o Timeline | âŒ | |
| VisualizaÃ§Ã£o Mapa Interativo | âŒ | |

---

## ğŸ¨ MÃ³dulo 3 â€” Reservas â€” ğŸŸ¢ 75%

| Feature | Status | Notas |
|:---|:---|:---|
| Tipos (hotel, voo, trem...) | âœ… | Enum completo com 8 tipos |
| CRUD de reservas | âœ… | Criar, editar, deletar |
| CÃ³digo da reserva | âœ… | `confirmationCode` |
| Valor e moeda | âœ… | |
| Status (confirmada, pendente...) | âœ… | Enum implementado |
| Upload de comprovante | âŒ | `attachmentFileId` existe mas uploads nÃ£o funcionam |

---

## ğŸ“‚ MÃ³dulo 4 â€” Documentos â€” ğŸ”´ 5%

| Feature | Status | Notas |
|:---|:---|:---|
| Tabela [FileMeta](file:///g:/Programacao/sistema_viagem/types.ts#79-89) | âœ… | Schema existe no DB |
| Upload de documentos | âŒ | [uploads.routes.ts](file:///g:/Programacao/sistema_viagem/backend/src/routes/uploads.routes.ts) existe mas com apenas 482 bytes |
| Categorias | âŒ | |
| VisualizaÃ§Ã£o/Download | âŒ | |
| Armazenamento seguro | âŒ | Nenhum bucket de Storage criado |

---

## â° MÃ³dulo 5 â€” Lembretes â€” ğŸ”´ 0%

| Feature | Status | Notas |
|:---|:---|:---|
| Tabela `Reminders` | âŒ | NÃ£o existe no schema |
| Tabela `Notifications` | âŒ | |
| Lembretes manuais | âŒ | |
| Lembretes automÃ¡ticos | âŒ | |
| Push/Email | âŒ | |

---

## ğŸ’° MÃ³dulo 6 â€” Controle Financeiro â€” ğŸŸ¢ 70%

| Feature | Status | Notas |
|:---|:---|:---|
| Registro de despesas | âœ… | CRUD completo |
| DivisÃ£o de gastos | âœ… | [ExpenseShare](file:///g:/Programacao/sistema_viagem/types.ts#126-135) implementado |
| BalanÃ§o entre participantes | âœ… | [getBalances](file:///g:/Programacao/sistema_viagem/services/api.ts#262-270) com sugestÃµes de pagamento |
| Categorias | ğŸŸ¡ | `categoryId` no schema, mas sem tabela de categorias |
| OrÃ§amento planejado vs real | âŒ | NÃ£o hÃ¡ campo de orÃ§amento na viagem |
| GrÃ¡ficos automÃ¡ticos | âŒ | |

---

## ğŸ‘¥ MÃ³dulo 7 â€” Viagens Compartilhadas â€” ğŸŸ¡ 40%

| Feature | Status | Notas |
|:---|:---|:---|
| Adicionar participantes | âœ… | Por nome e email |
| Listar participantes | âœ… | [ParticipantsList.tsx](file:///g:/Programacao/sistema_viagem/components/ParticipantsList.tsx) |
| Convidar por email (envio) | âŒ | Sem integraÃ§Ã£o de email |
| PermissÃµes (ver/editar/admin) | âŒ | Roles existem nos types mas sem enforcement |
| HistÃ³rico de alteraÃ§Ãµes | âŒ | |

---

## âœ… MÃ³dulo 8 â€” Checklist de Viagem â€” ğŸŸ¢ 90%

| Feature | Status | Notas |
|:---|:---|:---|
| Aba nativa em TripDetails | âœ… | IntegraÃ§Ã£o profunda com carregamento lazy-load |
| OrganizaÃ§Ã£o de tarefas | âœ… | OrdenaÃ§Ã£o alfabÃ©tica resolvida nativamente na API |
| Isolamento em viagens | âœ… | Removido dropdown; foco limpo na tela de viagem respectiva |
| CRUD e Toggle de checks | âœ… | Implementado e funcional |

---

## ğŸ¤– Recursos de IA â€” ğŸ”´ 5%

| Feature | Status | Notas |
|:---|:---|:---|
| Gerar roteiro automaticamente | âŒ | |
| Sugerir restaurantes/pontos | âŒ | |
| OtimizaÃ§Ã£o de roteiro | âŒ | |
| Estimativa de custos | âŒ | |
| Imagem de capa via IA | âœ… | Com mitigaÃ§Ã£o de cache de navegador (seed) e bypass de referrer policy |

---

## ğŸ¨ Interface & Design

| Feature | Status | Notas |
|:---|:---|:---|
| Home PadrÃ£o (Minhas Viagens) | âœ… | Fluxo principal ajustado para ser a prioridade de listagem nativa |
| Dashboard com prÃ³xima viagem | âœ… | Focado de forma minimalista apenas na viagem imediata |
| IntegraÃ§Ã£o Modular (Tabs) | âœ… | MÃ³dulos de Checklist, Participantes e FinanÃ§as unificados na pÃ¡gina da viagem |
| Design minimalista/moderno | âœ… | Tailwind CSS + Lucide Icons |
| Responsivo (Mobile First) | ğŸŸ¡ | Parcialmente, precisa de testes |
| Paleta Azul + Branco | âœ… | `brand-*` colors configuradas |

---

## ğŸ”’ SeguranÃ§a â€” ğŸŸ¢ 80%

| Feature | Status | Notas |
|:---|:---|:---|
| Controle de acesso (auth) | âœ… | JWT via Supabase Auth |
| RLS no banco de dados | âœ… | **RecÃ©m implementado** em todas as tabelas |
| ProteÃ§Ã£o de documentos | âŒ | MÃ³dulo de documentos nÃ£o existe |
| Backup automÃ¡tico | âŒ | NÃ£o configurado |
| Criptografia de dados | âœ… | PadrÃ£o Supabase (TLS + bcrypt) |

---

## ğŸ’¡ Recommendation: PrÃ³ximos Passos PrioritÃ¡rios

### ğŸ¥‡ Prioridade Alta (Core Experience)
1. **MÃ³dulo de Documentos** â€” Criar Storage bucket, implementar upload/download
2. **Drag-and-Drop no Roteiro** â€” Reordenar atividades visualmente

### ğŸ¥ˆ Prioridade MÃ©dia (DiferenciaÃ§Ã£o)
5. **Recursos de IA** â€” GeraÃ§Ã£o automÃ¡tica de roteiros (maior diferencial competitivo)
6. **Lembretes** â€” Criar schema e notificaÃ§Ãµes por email
7. **PermissÃµes granulares** â€” Enforcement de roles para participantes
8. **Categorias de despesas** â€” Tabela + UI para categorizaÃ§Ã£o

### ğŸ¥‰ Prioridade Baixa (Escalabilidade Futura)
9. **GrÃ¡ficos financeiros** â€” Chart.js ou Recharts
10. **Mapa interativo** â€” Google Maps/Mapbox no roteiro
11. **Sync com Google Calendar**
12. **Modo offline / App nativo**

---

## Qual direÃ§Ã£o vocÃª gostaria de explorar primeiro?
